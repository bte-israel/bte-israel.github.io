name: Notify Discord

on:
  workflow_dispatch:
    inputs:
      username:
        description: 'Minecraft Username'
        required: true
        default: ''
      rank:
        description: 'Rank'
        required: true
        default: ''

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Send notification to Discord
      env:
        DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
      run: |
        curl -X POST -H "Content-Type: application/json" -d "{\"content\": \"New User Added:\\nUsername: ${{ github.event.inputs.username }}\\nRank: ${{ github.event.inputs.rank }}\\nVerified: true\"}" $DISCORD_WEBHOOK_URL
